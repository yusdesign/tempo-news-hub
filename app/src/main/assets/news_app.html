<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Tempo - Live News</title>
    <style>
        :root {
            --guardian-blue: #052962;
            --guardian-dark: #121212;
            --guardian-light: #f6f6f6;
            --guardian-red: #c70000;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Georgia', serif;
            background: var(--guardian-light);
            color: var(--guardian-dark);
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .masthead {
            background: var(--guardian-blue);
            color: white;
            padding: 20px 0;
            border-bottom: 4px solid var(--guardian-red);
        }
        
        .masthead-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            text-align: center;
        }
        
        .logo {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            font-size: 2.5em;
            font-weight: 800;
            letter-spacing: -1px;
        }
        
        .logo span { color: var(--guardian-red); }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 30px 20px;
        }
        
        .context-banner {
            background: var(--guardian-blue);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .news-grid {
            display: grid;
            gap: 25px;
        }
        
        .article-card {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 4px solid var(--guardian-blue);
        }
        
        .article-title {
            font-size: 1.4em;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--guardian-dark);
        }
        
        .article-summary {
            color: #444;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .article-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.9em;
            color: #666;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .error {
            background: #ffeaa7;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin: 20px 0;
        }
        
        .source-badge {
            background: var(--guardian-blue);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 600;
        }
        
        .refresh-btn {
            background: var(--guardian-red);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <header class="masthead">
        <div class="masthead-container">
            <div class="logo">The <span>Tempo</span></div>
            <div>Live RSS News Feed</div>
        </div>
    </header>

    <div class="container">
        <section class="context-banner">
            <h1>üì∞ Live News Feed</h1>
            <p>Real headlines from multiple sources ‚Ä¢ Updated continuously</p>
            <button class="refresh-btn" onclick="newsFetcher.fetchAllNews()">üîÑ Refresh News</button>
        </section>

        <section class="news-grid" id="newsGrid">
            <div class="loading">
                <div style="font-size: 2em; margin-bottom: 15px;">‚ö°</div>
                <h3>Loading live news feeds...</h3>
                <p>Fetching real-time headlines from multiple sources</p>
            </div>
        </section>
    </div>

    <script>
        // REAL RSS NEWS FETCHER
        const newsFetcher = {
            sources: [
                {
                    name: "BBC News",
                    url: "https://feeds.bbci.co.uk/news/world/rss.xml",
                    color: "#BB1919"
                },
                {
                    name: "Reuters", 
                    url: "https://feeds.reuters.com/reuters/topNews",
                    color: "#FF8000"
                },
                {
                    name: "The Guardian",
                    url: "https://www.theguardian.com/international/rss",
                    color: "#052962"
                }
            ],
            
            async fetchRSSFeed(source) {
                try {
                    // Use CORS proxy to avoid blocking
                    const proxyUrl = 'https://api.allorigins.win/raw?url=';
                    const response = await fetch(proxyUrl + encodeURIComponent(source.url));
                    const text = await response.text();
                    
                    // Parse RSS XML
                    const parser = new DOMParser();
                    const xmlDoc = parser.parseFromString(text, "text/xml");
                    const items = xmlDoc.getElementsByTagName("item");
                    
                    const articles = [];
                    for (let i = 0; i < Math.min(5, items.length); i++) {
                        const item = items[i];
                        const title = item.getElementsByTagName("title")[0]?.textContent || "No title";
                        const link = item.getElementsByTagName("link")[0]?.textContent || "#";
                        const description = item.getElementsByTagName("description")[0]?.textContent || "No description available";
                        const pubDate = item.getElementsByTagName("pubDate")[0]?.textContent || new Date().toISOString();
                        
                        // Clean up description (remove HTML tags)
                        const cleanDescription = description.replace(/<[^>]*>/g, '').substring(0, 200) + '...';
                        
                        articles.push({
                            title: title,
                            description: cleanDescription,
                            link: link,
                            date: new Date(pubDate).toLocaleDateString(),
                            source: source.name,
                            color: source.color
                        });
                    }
                    
                    return articles;
                } catch (error) {
                    console.error(`Error fetching ${source.name}:`, error);
                    return [];
                }
            },
            
            async fetchAllNews() {
                const grid = document.getElementById('newsGrid');
                grid.innerHTML = '<div class="loading"><div style="font-size: 2em; margin-bottom: 15px;">‚ö°</div><h3>Fetching live news...</h3></div>';
                
                try {
                    const allArticles = [];
                    
                    // Fetch from all sources in parallel
                    const promises = this.sources.map(source => this.fetchRSSFeed(source));
                    const results = await Promise.allSettled(promises);
                    
                    results.forEach((result, index) => {
                        if (result.status === 'fulfilled') {
                            allArticles.push(...result.value);
                        }
                    });
                    
                    // Sort by date (newest first) and take top 15
                    const sortedArticles = allArticles
                        .sort((a, b) => new Date(b.date) - new Date(a.date))
                        .slice(0, 15);
                    
                    this.renderArticles(sortedArticles);
                    
                } catch (error) {
                    grid.innerHTML = `
                        <div class="error">
                            <h3>üåê Network Error</h3>
                            <p>Unable to fetch live news. Please check your internet connection and try again.</p>
                            <button class="refresh-btn" onclick="newsFetcher.fetchAllNews()">üîÑ Retry</button>
                        </div>
                    `;
                }
            },
            
            renderArticles(articles) {
                const grid = document.getElementById('newsGrid');
                
                if (articles.length === 0) {
                    grid.innerHTML = '<div class="error">No articles found. Try refreshing.</div>';
                    return;
                }
                
                grid.innerHTML = articles.map(article => `
                    <article class="article-card">
                        <div class="article-meta">
                            <span class="source-badge" style="background: ${article.color}">${article.source}</span>
                            <span>${article.date}</span>
                        </div>
                        <h2 class="article-title">${article.title}</h2>
                        <p class="article-summary">${article.description}</p>
                        <div class="article-meta">
                            <span>üì∞ Real News Feed</span>
                            <a href="${article.link}" style="color: var(--guardian-blue); text-decoration: none;" 
                               onclick="window.open('${article.link}', '_blank')">
                                View Original ‚Üí
                            </a>
                        </div>
                    </article>
                `).join('');
            },
            
            initialize() {
                this.fetchAllNews();
                // Auto-refresh every 10 minutes
                setInterval(() => this.fetchAllNews(), 600000);
            }
        };
        
        // Start the real news feed!
        newsFetcher.initialize();
    </script>
</body>
</html>
